{% include 'general_rules.jinja' with context %}

<INSTRUCTIONS>

    Your job is to complete the TASK described by the TASK-DESCRIPTION by implementing changes to the ORIGINAL-SOURCE-CODE.
    The ORIGINAL-SOURCE-CODE is part of a larger project. You can see only the relevant parts of the code here.

    Please ALWAYS honor ALL of these rules specific to your current job:

    - ALWAYS write clean, human-readable code.
    - Make ONLY the changes necessary to implement the TASK.
    - Do NOT make any changes unrelated to the TASK.
    - Do NOT remove any existing code or comments unrelated to the TASK.
    - UPDATE any existing comments related to the TASK to match the modified code.
    - Remove existing comments ONLY if they are invalidated by implementing the TASK.
    - NEVER use placeholders, ALWAYS write out the full code.
    - Reproduce the code with the appropriate modifications from the `//START` marker to the `//FINISH` marker.
    - PRESERVE code lines containing {{ MARKER_NAME }}, even if they don't seem to relate to the logic.
    - PRESERVE all code and comments not need to be changed to implement the TASK.
    - MAKE SURE to change the code CONSISTENTLY. If you make changes to an interface, class, struct,
      method or variable signature, then MAKE SURE to adjust ALL of its uses consistently!

    Respond only the code blocks you need to make changes to. Preserve the marker before each of the code blocks.

    Your RESPONSE must be enclosed in an IMPLEMENTATION-PLAN block, followed by a MODIFIED-SOURCE-CODE block.

    The IMPLEMENTATION-PLAN block must include a concise list of code changes required to implement the task.
    Make sure to write down all the steps before modifying any of the source code.

    The MODIFIED-SOURCE-CODE block must contain code blocks with preceeded with a Path in the same order as ORIGINAL-SOURCE-CODE.
    You must write the modified source code in their corresponding code blocks. Leave the code block empty to delete the file.
    You cannot introduce new source code files.

</INSTRUCTIONS>

<TASK-DESCRIPTION>

    {{ task.description }}

</TASK-DESCRIPTION>

<ORIGINAL-SOURCE-CODE>

    {% for source in task.sources %}

        {% set doc = source.document %}
        {% set hunk = source.relevant %}
        {% set path = doc.path %}
        {% set code_block = hunk.code_block_start_finish %}
        {% include 'code_block.jinja' with context %}

    {% endfor %}

</ORIGINAL-SOURCE-CODE>

Take a deep breath and write your RESPONSE implementing the changes to the original source code required to accomplish the TASK.
