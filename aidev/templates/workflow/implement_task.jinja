{% include 'general_rules.jinja' with context %}

<INSTRUCTIONS>

    Your job is to complete the TASK described by the TASK-DESCRIPTION by implementing changes to the ORIGINAL-SOURCE-CODE.
    The ORIGINAL-SOURCE-CODE is part of a larger project. You can see only the relevant parts of the code here.

    The changes required have already been planned, you can find them in the IMPLEMENTATION-PLAN block. Always follow
    the IMPLEMENTATION-PLAN with your code changes.

    Please ALWAYS honor ALL of these rules specific to your current job:

    - ALWAYS write clean, human-readable code.
    - Make ONLY the changes necessary to implement the TASK.
    - Do NOT make any changes unrelated to the TASK.
    - Do NOT remove any existing code or comments unrelated to the TASK.
    - UPDATE any existing comments related to the TASK to match the modified code.
    - Remove existing comments ONLY if they are invalidated by implementing the TASK.
    - NEVER use placeholders, ALWAYS write out the full code.
    - PRESERVE all code and comments not need to be changed to implement the TASK.
    - NEVER delete any code or comment lines unrelated to your changes.
    - MAKE SURE to change the code CONSISTENTLY. If you make changes to an interface, class, struct,
    - ADD the necessary using statements at the top to import the necessary namespaces used by the modified code.
    - MAKE SURE to adjust all uses of any method or variable which has its signature or type changed.
    - MAKE SURE to add the using statements to import the necessary namespaces at the top of any newly created source files.
    - MAKE SURE to add define the right namespace in any newly created C# source files.
    - Do NOT repeat the same source file.

    Respond only the code blocks you need to make changes to. Preserve the marker before each of the code blocks.

    Your RESPONSE must contain consecutive code blocks, each of them preceeded with a "Path:" line in the same order
    as the ORIGINAL-SOURCE-CODE. You must write any modified code in their corresponding code blocks. You may skip
    code blocks corresponding to original source files you do not need to change to implement the code changes
    required to implement the TASK.

    To delete a source file leave its corresponding code block empty.

    If you skip a source file it will remain unmodified.

    You can modify or delete these existing files (paths):

    {% for path in source_paths %}
        - `{{ path }}`
    {% endfor %}

    To create a new source file just state its Path: and provide the code block with its contents.
    Introduce new source files only if really needed. For new files use the same file naming convention
    as the other source files of the .NET Core Web server project are using.

    Write each modified or new file only once, then finish your response.

</INSTRUCTIONS>

<TASK-DESCRIPTION>

    {{ task.description }}

</TASK-DESCRIPTION>

<IMPLEMENTATION-PLAN>

    {{ task.plan }}

</IMPLEMENTATION-PLAN>

<ORIGINAL-SOURCE-CODE>

    {% for source in task.sources %}

        {% set doc = source.document %}
        {% set hunk = source.relevant %}
        {% set path = doc.path %}
        {% set code_block = hunk.code_block %}
        {% include 'code_block.jinja' with context %}

    {% endfor %}

</ORIGINAL-SOURCE-CODE>

Take a deep breath and write your RESPONSE implementing the changes to the original source code required to accomplish the TASK.
